<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>GeoAR Fish Demo</title>

    <!-- 1. å¼•å…¥ A-Frame (åŸºç¡€ VR/AR æ¡†æ¶) -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!-- 2. å¼•å…¥ AR.js (èµ‹äºˆ A-Frame AR èƒ½åŠ›) -->
    <!-- æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ 'aframe-ar.js' è€Œä¸æ˜¯ 'aframe-ar-nft.js'ï¼Œå› ä¸ºæ•™ç¨‹æ¨èå‰è€…æ›´é€šç”¨ -->
    <script type='text/javascript'
        src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>

    <!-- 3. å¼•å…¥ Look-at ç»„ä»¶ (ç¡®ä¿ç‰©ä½“å§‹ç»ˆé¢å‘ç›¸æœº) -->
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
</head>

<body style='margin: 0; overflow: hidden;'>

    <!-- ç®€å•çš„ UI è°ƒè¯•é¢æ¿ -->
    <div
        style="position: fixed; top: 10px; left: 0; width: 100%; text-align: center; z-index: 9999; color: white; font-family: sans-serif; pointer-events: auto;">
        <h1 style="text-shadow: 2px 2px 4px #000;">AR Fish Demo</h1>
        <p id="debug" style="background: rgba(0,0,0,0.5); padding: 5px; display: inline-block;">ç­‰å¾…æ“ä½œ...</p>
        <br /><br />
        <button onclick="placeFishInFront()"
            style="padding: 15px 30px; font-size: 18px; border: none; border-radius: 5px; background: #007bff; color: white; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
            ğŸŸ ç‚¹å‡»æ­¤å¤„æ”¾ç½®é±¼ (å®¤å†…æ¨¡å¼)
        </button>
    </div>

    <!-- A-Scene åœºæ™¯é…ç½® -->
    <!-- vr-mode-ui="enabled: false" ç¦ç”¨å³ä¸‹è§’ VR çœ¼é•œå›¾æ ‡ -->
    <!-- embedded ä½¿åœºæ™¯åµŒå…¥ç½‘é¡µ -->
    <!-- arjs å®šä¹‰å±æ€§ï¼šwebcam (è°ƒç”¨æ‘„åƒå¤´), videoTexture (ä¼˜åŒ–è´´å›¾), debugUIEnabled (å…³é—­è°ƒè¯•é»‘å—) -->
    <a-scene vr-mode-ui="enabled: false" embedded arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false;'>

        <!-- è¿™æ˜¯ä¸€ä¸ªåŒ…å«é±¼å½¢çŠ¶çš„å®ä½“ -->
        <!-- åˆå§‹ visible="false" ç¡®ä¿è¿˜æ²¡ç‚¹æŒ‰é’®æ—¶ä¸ä¹±è·‘ -->
        <a-entity id="fish-model" visible="false">
            <!-- é±¼èº« (çº¢è‰²æ¤­çƒ) -->
            <a-sphere color="red" radius="0.5" scale="1 0.7 1.5"></a-sphere>

            <!-- é±¼å°¾ (åœ†é”¥) -->
            <a-cone color="red" radius-bottom="0.2" radius-top="0.01" height="0.6" position="0 0 -0.8"
                rotation="90 0 0"></a-cone>

            <!-- çœ¼ç› (ç™½è‰²çƒ + é»‘è‰²çƒ) -->
            <a-sphere color="white" radius="0.1" position="0.2 0.3 0.4"></a-sphere>
            <a-sphere color="black" radius="0.05" position="0.25 0.35 0.45"></a-sphere>

            <a-sphere color="white" radius="0.1" position="-0.2 0.3 0.4"></a-sphere>
            <a-sphere color="black" radius="0.05" position="-0.25 0.35 0.45"></a-sphere>

            <!-- ç®€å•çš„åŠ¨ç”»ï¼šä¸Šä¸‹æµ®åŠ¨ -->
            <a-animation attribute="position" to="0 0.1 0" direction="alternate" durability="1000"
                repeat="indefinite"></a-animation>
        </a-entity>

        <!-- ç›¸æœºç»„ä»¶ï¼šæ·»åŠ  gps-camera è™½ç„¶è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç”¨ç›¸å¯¹å®šä½ -->
        <!-- rotation-reader ç”¨äºè¯»å–æ‰‹æœºé™€èºä»ªæ–¹å‘ -->
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
        function placeFishInFront() {
            var fish = document.querySelector('#fish-model');
            var debugInfo = document.getElementById('debug');

            if (fish) {
                // å¼ºåˆ¶æ˜¾ç¤º
                fish.setAttribute('visible', 'true');

                // å…³é”®ç‚¹ï¼šå°†ç‰©ä½“æ”¾ç½®åœ¨æ‘„åƒæœºåæ ‡ç³»çš„å‰æ–¹
                // 0 0 -3 è¡¨ç¤ºåœ¨æ­£å‰æ–¹ 3 ç±³å¤„ï¼Œä¸”é«˜åº¦ä¸æ‘„åƒå¤´æŒå¹³ (0)
                // è¿™æ ·æ— è®ºä½ åœ¨å®¤å†…è¿˜æ˜¯å®¤å¤–ï¼Œæ— è®º GPS ä¿¡å·å¦‚ä½•ï¼Œå®ƒéƒ½ä¼šå‡ºç°åœ¨ä½ çœ¼å‰ã€‚
                fish.setAttribute('position', '0 0 -3');

                // è®©é±¼é¢å‘ä½  (å¯é€‰ï¼Œæœ‰äº›æ¨¡å‹éœ€è¦æ—‹è½¬ 180 åº¦)
                // fish.setAttribute('look-at', '[camera]');

                debugInfo.innerText = "é±¼å·²æ”¾ç½®åœ¨æ­£å‰æ–¹ 3 ç±³å¤„ï¼è¯·ç¯é¡¾å››å‘¨ã€‚";
                console.log("Fish placed at 0 0 -3");
            } else {
                debugInfo.innerText = "é”™è¯¯ï¼šæœªæ‰¾åˆ°é±¼çš„æ¨¡å‹å®ä½“ã€‚";
            }
        }
    </script>
</body>

</html>