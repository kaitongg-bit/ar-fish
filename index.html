<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Simple AR Fish</title>
    <!-- Use specific A-Frame and AR.js versions known to work together -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <!-- Minimal UI -->
    <div style="position: fixed; top: 10px; width: 100%; text-align: center; z-index: 100; color: white;">
        <button onclick="addFish()" style="font-size: 20px; padding: 10px 20px;">Spawn Fish NOW</button>
    </div>

    <!-- Scene Setup -->
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
        <!-- Camera -->
        <!-- rotation-reader handles device orientation -->
        <a-camera gps-camera rotation-reader></a-camera>

        <!-- Fish Entity - Initially present but we will force update it -->
        <a-entity id="fish-model" position="0 0 -3" scale="0.5 0.5 0.5" visible="true">
            <!-- Body -->
            <a-sphere color="red" radius="1"></a-sphere>
            <!-- Tail -->
            <a-cone color="red" radius-bottom="0.5" height="1" position="0 0 -1.5" rotation="90 0 0"></a-cone>
        </a-entity>

    </a-scene>

    <script>
        function addFish() {
            const fish = document.querySelector("#fish-model");
            const camera = document.querySelector("a-camera");

            // 1. Force visible
            fish.setAttribute("visible", "true");

            // 2. Reposition directly in front of camera (-3 meters z)
            // We use relative position in the scene graph
            // If the fish is a child of the scene, 0 0 -3 is default "forward" 
            // provided the camera is at 0 0 0 (which it mostly is at start)
            fish.setAttribute("position", "0 0 -3");

            alert("Fish spawned at 0 0 -3");
        }

        // Auto-run on load to try spawning immediately
        window.onload = () => {
            setTimeout(addFish, 2000); // Wait 2s for AR to init
        };
    </script>
</body>

</html>